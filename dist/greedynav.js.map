{"version":3,"sources":["../src/js/greedynav.js"],"names":["root","_breakWidths","_bulletTimers","_interval","_availableSpace","_doc","_fixedButton","_nav","_numOfItems","_numOfVisibleItems","_overflowList","_requiredSpace","_showMoreAnimationTimer","_theBullets","_totalSpace","_totalSpacing","_viewMoreButton","_viewMoreItem","_visibleList","spaceBetweenItems","_animateEllipses","forEach","timer","clearTimeout","bullet","index","style","push","setTimeout","removeAttribute","_fitAndAdjust","f","recheck","clientWidth","getElementsByTagName","length","insertBefore","lastChild","firstChild","appendChild","classList","add","remove","_init","document","querySelector","querySelectorAll","childNodes","filter","childNode","nodeType","offsetWidth","addEventListener","ev","stopPropagation","target","contains","parentNode","toggle","global","window"],"mappings":"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","file":"greedynav.js","sourcesContent":["/**\r\n * GreedyNav-SASS-VanillaJS - SASS and Vanilla JS version of GreedyNav (https://github.com/lukejacksonn/GreedyNav)\r\n * @author Johan Meester <walter.doodah@gmail.com>\r\n * @licence MIT - http://opensource.org/licenses/MIT\r\n * @copyright Johan Meester 2016\r\n */\r\n'use strict';\r\n\r\n(function (root) {\r\n  const _breakWidths = [];\r\n  const _bulletTimers = [];\r\n  const _interval = 100;\r\n\r\n  let _availableSpace = 0;\r\n  let _doc = null;\r\n  let _fixedButton = null;\r\n  let _nav = null;\r\n  let _numOfItems = 0;\r\n  let _numOfVisibleItems = 0;\r\n  let _overflowList = null;\r\n  let _requiredSpace = 0;\r\n  let _showMoreAnimationTimer = 0;\r\n  let _theBullets = null;\r\n  let _totalSpace = 0;\r\n  let _totalSpacing = 0;\r\n  let _viewMoreButton = null;\r\n  let _viewMoreItem = null;\r\n  let _visibleList = null;\r\n\r\n  let spaceBetweenItems = 0; // Set equal to stylesheet setting $c-greedy-nav-space-between-items\r\n\r\n  const _animateEllipses = function () {\r\n    _bulletTimers.forEach((timer) => {\r\n      root.clearTimeout(timer);\r\n    });\r\n    _theBullets.forEach((bullet, index) => {\r\n      bullet.style = 'display: none;';\r\n      _bulletTimers.push(root.setTimeout(() => {\r\n        bullet.removeAttribute('style');\r\n      }, _interval * (index + 1)));\r\n    });\r\n  };\r\n\r\n  /** @function _fitAndAdjust */\r\n  const _fitAndAdjust = (function f(recheck) {\r\n    if (!recheck) {\r\n      root.clearTimeout(_showMoreAnimationTimer);\r\n    }\r\n\r\n    // Get current client width\r\n    _availableSpace = _nav.clientWidth - _fixedButton.clientWidth - _totalSpacing;\r\n    _availableSpace -= _viewMoreButton.clientWidth;\r\n\r\n    _numOfVisibleItems = _visibleList.getElementsByTagName('li').length;\r\n    _requiredSpace = _breakWidths[_numOfVisibleItems - 1];\r\n\r\n    if (_requiredSpace > _availableSpace) {\r\n      // There is not enough room\r\n      _overflowList.insertBefore(_visibleList.lastChild, _overflowList.firstChild);\r\n      _numOfVisibleItems -= 1;\r\n\r\n      // Check again\r\n      f(true);\r\n    } else if (_availableSpace > _breakWidths[_numOfVisibleItems]) {\r\n      // More than enough room\r\n      _visibleList.appendChild(_overflowList.firstChild);\r\n      _numOfVisibleItems += 1;\r\n\r\n      // Check again\r\n      f(true);\r\n    }\r\n\r\n    if (_numOfVisibleItems === _numOfItems) {\r\n      _viewMoreItem.classList.add('s-greedy-nav-hidden');\r\n    } else {\r\n      _viewMoreItem.classList.remove('s-greedy-nav-hidden');\r\n      _showMoreAnimationTimer = root.setTimeout(() => {\r\n        _animateEllipses(_theBullets);\r\n      }, 1000);\r\n    }\r\n  });\r\n\r\n  const _init = function () {\r\n    _doc = root.document;\r\n\r\n    _nav = _doc.querySelector('.c-greedy-nav');\r\n    _visibleList = _nav.querySelector('.c-greedy-nav__list--visible');\r\n    _overflowList = _nav.querySelector('.c-greedy-nav__overflow-list');\r\n    _viewMoreItem = _nav.querySelector('.c-greedy-nav__list--show-more');\r\n    _viewMoreButton = _nav.querySelector('.c-greedy-nav__btn--show-more');\r\n    _fixedButton = _nav.querySelector('.c-greedy-nav__fixed');\r\n\r\n    _theBullets = _viewMoreButton.querySelectorAll('.c-greedy-nav__bullet');\r\n\r\n    // Get current visible items and their dimensions\r\n    [..._visibleList.childNodes]\r\n      .filter((childNode) => {\r\n        return (childNode.nodeType === 1);\r\n      })\r\n      .forEach((childNode) => {\r\n        _totalSpace += childNode.offsetWidth;\r\n        _numOfItems += 1;\r\n        _breakWidths.push(_totalSpace);\r\n      });\r\n\r\n    _totalSpacing = spaceBetweenItems * _numOfItems;\r\n\r\n    _overflowList.addEventListener('click', (ev) => {\r\n      ev.stopPropagation();\r\n    }, false);\r\n\r\n    _fitAndAdjust();\r\n  };\r\n\r\n  // Listen for resize event\r\n  root.addEventListener('resize', _fitAndAdjust, false);\r\n\r\n  // Listen for click event\r\n  root.addEventListener('click', (ev) => {\r\n    if (ev.target.classList.contains('c-greedy-nav__btn--show-more') || ev.target.parentNode.classList.contains('c-greedy-nav__btn--show-more')) {\r\n      _overflowList.classList.toggle('s-greedy-nav-hidden');\r\n    } else {\r\n      _overflowList.classList.add('s-greedy-nav-hidden');\r\n    }\r\n  });\r\n\r\n  root.addEventListener('DOMContentLoaded', _init);\r\n}(typeof global !== 'undefined' ? global : window));\r\n"]}