{"version":3,"sources":["../src/js/greedynav.js"],"names":["w","DOC","document","NAV","querySelector","VISIBLE_LIST","OVERFLOW_LIST","VIEW_MORE_ITEM","VIEW_MORE_BUTTON","FIXED_BUTTON","SPACE_BETWEEN_ITEMS","BREAK_WIDTHS","theBullets","querySelectorAll","interval","bulletTimers","animateEllipses","forEach","timer","clearTimeout","bullet","index","style","push","setTimeout","removeAttribute","numOfItems","totalSpace","childNodes","node","nodeType","offsetWidth","TOTAL_SPACING","availableSpace","numOfVisibleItems","requiredSpace","showMoreAnimationTimer","fitAndAdjust","f","recheck","clientWidth","getElementsByTagName","length","insertBefore","lastChild","firstChild","appendChild","classList","add","remove","addEventListener","ev","target","contains","parentNode","toggle","stopPropagation","global","window"],"mappings":"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","file":"greedynav.js","sourcesContent":["/**\r\n * GreedyNav-SASS-VanillaJS - SASS and Vanilla JS version of GreedyNav (https://github.com/lukejacksonn/GreedyNav)\r\n * @author Johan Meester <walter.doodah@gmail.com>\r\n * @licence MIT - http://opensource.org/licenses/MIT\r\n * @copyright Johan Meester 2016\r\n */\r\n(function (w) {\r\n  const DOC = w.document;\r\n\r\n  const NAV = DOC.querySelector('.c-greedy-nav');\r\n  const VISIBLE_LIST = NAV.querySelector('.c-greedy-nav__list--visible');\r\n  const OVERFLOW_LIST = NAV.querySelector('.c-greedy-nav__overflow-list');\r\n  const VIEW_MORE_ITEM = NAV.querySelector('.c-greedy-nav__list--show-more');\r\n  const VIEW_MORE_BUTTON = NAV.querySelector('.c-greedy-nav__btn--show-more');\r\n  const FIXED_BUTTON = NAV.querySelector('.c-greedy-nav__fixed');\r\n  const SPACE_BETWEEN_ITEMS = 0; // Set equal to stylesheet setting $c-greedy-nav-space-between-items\r\n  const BREAK_WIDTHS = [];\r\n\r\n  const theBullets = VIEW_MORE_BUTTON.querySelectorAll('.c-greedy-nav__bullet');\r\n  const interval = 100;\r\n  const bulletTimers = [];\r\n\r\n  const animateEllipses = () => {\r\n    bulletTimers.forEach((timer) => {\r\n      clearTimeout(timer);\r\n    });\r\n    theBullets.forEach((bullet, index) => {\r\n      bullet.style = 'display: none;';\r\n      bulletTimers.push(setTimeout(() => {\r\n        bullet.removeAttribute('style');\r\n      }, interval * (index + 1)));\r\n    });\r\n  };\r\n\r\n  let numOfItems = 0;\r\n  let totalSpace = 0;\r\n\r\n  // Get current visible items and their dimensions\r\n  VISIBLE_LIST\r\n    .childNodes\r\n    .forEach((node) => {\r\n      if (node.nodeType === 1) {\r\n        totalSpace += node.offsetWidth;\r\n        numOfItems += 1;\r\n        BREAK_WIDTHS.push(totalSpace);\r\n      }\r\n    });\r\n\r\n  const TOTAL_SPACING = SPACE_BETWEEN_ITEMS * numOfItems;\r\n\r\n  let availableSpace;\r\n  let numOfVisibleItems;\r\n  let requiredSpace;\r\n  let showMoreAnimationTimer;\r\n\r\n  /** @function fitAndAdjust */\r\n  const fitAndAdjust = (function f(recheck) {\r\n    if (!recheck) {\r\n      clearTimeout(showMoreAnimationTimer);\r\n    }\r\n\r\n    // Get current client width\r\n    availableSpace = NAV.clientWidth - FIXED_BUTTON.clientWidth - TOTAL_SPACING;\r\n    availableSpace -= VIEW_MORE_BUTTON.clientWidth;\r\n\r\n    numOfVisibleItems = VISIBLE_LIST.getElementsByTagName('li').length;\r\n    requiredSpace = BREAK_WIDTHS[numOfVisibleItems - 1];\r\n\r\n    if (requiredSpace > availableSpace) {\r\n      // There is not enough room\r\n      OVERFLOW_LIST.insertBefore(VISIBLE_LIST.lastChild, OVERFLOW_LIST.firstChild);\r\n      numOfVisibleItems -= 1;\r\n\r\n      // Check again\r\n      f(true);\r\n    } else if (availableSpace > BREAK_WIDTHS[numOfVisibleItems]) {\r\n      // More than enough room\r\n      VISIBLE_LIST.appendChild(OVERFLOW_LIST.firstChild);\r\n      numOfVisibleItems += 1;\r\n\r\n      // Check again\r\n      f(true);\r\n    }\r\n\r\n    if (numOfVisibleItems === numOfItems) {\r\n      VIEW_MORE_ITEM.classList.add('s-greedy-nav-hidden');\r\n    } else {\r\n      VIEW_MORE_ITEM.classList.remove('s-greedy-nav-hidden');\r\n      showMoreAnimationTimer = setTimeout(() => {\r\n        animateEllipses(theBullets);\r\n      }, 1000);\r\n    }\r\n  });\r\n\r\n  // Listen for resize event\r\n  w.addEventListener('resize', fitAndAdjust, false);\r\n\r\n  // Listen for click event\r\n  w.addEventListener('click', (ev) => {\r\n    if (ev.target.classList.contains('c-greedy-nav__btn--show-more') || ev.target.parentNode.classList.contains('c-greedy-nav__btn--show-more')) {\r\n      OVERFLOW_LIST.classList.toggle('s-greedy-nav-hidden');\r\n    } else {\r\n      OVERFLOW_LIST.classList.add('s-greedy-nav-hidden');\r\n    }\r\n  });\r\n\r\n  OVERFLOW_LIST.addEventListener('click', (ev) => {\r\n    ev.stopPropagation();\r\n  }, false);\r\n\r\n  fitAndAdjust();\r\n}(typeof global !== 'undefined' ? global : window));\r\n"]}