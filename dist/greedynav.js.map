{"version":3,"sources":["../src/js/greedynav.js"],"names":["w","DOC","document","NAV","querySelector","VIEW_MORE_BUTTON","VISIBLE_LIST","OVERFLOW_LIST","BREAK_WIDTHS","PADDING","numOfItems","totalSpace","childNodes","forEach","node","nodeType","offsetWidth","push","availableSpace","numOfVisibleItems","requiredSpace","fitAndAdjust","f","clientWidth","classList","contains","getElementsByTagName","length","insertBefore","lastChild","appendChild","firstChild","dataset","count","add","remove","addEventListener","ev","target","toggle","global","window"],"mappings":";;AAAA;;;;;;AAMC,WAAUA,CAAV,EAAa;AACZ,MAAMC,MAAMD,EAAEE,QAAd;;AAEA,MAAMC,MAAMF,IAAIG,aAAJ,CAAkB,eAAlB,CAAZ;AACA,MAAMC,mBAAmBF,IAAIC,aAAJ,CAAkB,uBAAlB,CAAzB;AACA,MAAME,eAAeH,IAAIC,aAAJ,CAAkB,qBAAlB,CAArB;AACA,MAAMG,gBAAgBJ,IAAIC,aAAJ,CAAkB,8BAAlB,CAAtB;AACA,MAAMI,eAAe,EAArB;AACA,MAAMC,UAAU,EAAhB;;AAEA,MAAIC,aAAa,CAAjB;AACA,MAAIC,aAAa,CAAjB;;AAEA;AACAL,eACGM,UADH,CAEGC,OAFH,CAEW,UAACC,IAAD,EAAU;AACjB,QAAIA,KAAKC,QAAL,KAAkB,CAAtB,EAAyB;AACvBJ,oBAAcG,KAAKE,WAAnB;AACAN,oBAAc,CAAd;AACAF,mBAAaS,IAAb,CAAkBN,UAAlB;AACD;AACF,GARH;;AAUA,MAAIO,uBAAJ;AACA,MAAIC,0BAAJ;AACA,MAAIC,sBAAJ;;AAEA;AACA,MAAMC,eAAgB,SAASC,CAAT,GAAa;AACjC;AACAJ,qBAAiBf,IAAIoB,WAAJ,GAAkBd,OAAnC;;AAEA,QAAIJ,iBAAiBmB,SAAjB,CAA2BC,QAA3B,CAAoC,UAApC,CAAJ,EAAqD;AACnDP,wBAAkBb,iBAAiBkB,WAAnC;AACD;;AAEDJ,wBAAoBb,aAAaoB,oBAAb,CAAkC,IAAlC,EAAwCC,MAA5D;AACAP,oBAAgBZ,aAAaW,oBAAoB,CAAjC,CAAhB;;AAEA,QAAIC,gBAAgBF,cAApB,EAAoC;AAClC;AACAX,oBAAcqB,YAAd,CAA2BtB,aAAauB,SAAxC,EAAmDtB,cAAcsB,SAAjE;AACAV,2BAAqB,CAArB;;AAEA;AACAG;AACD,KAPD,MAOO,IAAIJ,iBAAiBV,aAAaW,iBAAb,CAArB,EAAsD;AAC3D;AACAb,mBAAawB,WAAb,CAAyBvB,cAAcwB,UAAvC;AACAZ,2BAAqB,CAArB;;AAEA;AACAG;AACD;;AAED;AACAjB,qBAAiB2B,OAAjB,CAAyBC,KAAzB,GAAiCvB,aAAaS,iBAA9C;;AAEA,QAAIA,sBAAsBT,UAA1B,EAAsC;AACpCL,uBAAiBmB,SAAjB,CAA2BU,GAA3B,CAA+B,UAA/B;AACD,KAFD,MAEO;AACL7B,uBAAiBmB,SAAjB,CAA2BW,MAA3B,CAAkC,UAAlC;AACD;AACF,GAnCD;;AAqCA;AACAnC,IAAEoC,gBAAF,CAAmB,QAAnB,EAA6Bf,YAA7B,EAA2C,KAA3C;;AAEA;AACArB,IAAEoC,gBAAF,CAAmB,OAAnB,EAA4B,UAACC,EAAD,EAAQ;AAClC,QAAIA,GAAGC,MAAH,CAAUd,SAAV,CAAoBC,QAApB,CAA6B,sBAA7B,CAAJ,EAA0D;AACxDlB,oBAAciB,SAAd,CAAwBe,MAAxB,CAA+B,UAA/B;AACD;AACF,GAJD;;AAMAlB;AACD,CA7EA,EA6EC,OAAOmB,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyCC,MA7E1C,CAAD","file":"greedynav.js","sourcesContent":["/**\r\n * GreedyNav-SASS-VanillaJS - SASS and Vanilla JS version of GreedyNav (https://github.com/lukejacksonn/GreedyNav)\r\n * @author Johan Meester <walter.doodah@gmail.com>\r\n * @licence MIT - http://opensource.org/licenses/MIT\r\n * @copyright Johan Meester 2016\r\n */\r\n(function (w) {\r\n  const DOC = w.document;\r\n\r\n  const NAV = DOC.querySelector('.c-greedy-nav');\r\n  const VIEW_MORE_BUTTON = NAV.querySelector('.c-greedy-nav__button');\r\n  const VISIBLE_LIST = NAV.querySelector('.c-greedy-nav__list');\r\n  const OVERFLOW_LIST = NAV.querySelector('.c-greedy-nav__overflow-list');\r\n  const BREAK_WIDTHS = [];\r\n  const PADDING = 10;\r\n\r\n  let numOfItems = 0;\r\n  let totalSpace = 0;\r\n\r\n  // Get current visible items and their dimensions\r\n  VISIBLE_LIST\r\n    .childNodes\r\n    .forEach((node) => {\r\n      if (node.nodeType === 1) {\r\n        totalSpace += node.offsetWidth;\r\n        numOfItems += 1;\r\n        BREAK_WIDTHS.push(totalSpace);\r\n      }\r\n    });\r\n\r\n  let availableSpace;\r\n  let numOfVisibleItems;\r\n  let requiredSpace;\r\n\r\n  /** @function fitAndAdjust */\r\n  const fitAndAdjust = (function f() {\r\n    // Get current client width\r\n    availableSpace = NAV.clientWidth - PADDING;\r\n\r\n    if (VIEW_MORE_BUTTON.classList.contains('s-hidden')) {\r\n      availableSpace -= VIEW_MORE_BUTTON.clientWidth;\r\n    }\r\n\r\n    numOfVisibleItems = VISIBLE_LIST.getElementsByTagName('li').length;\r\n    requiredSpace = BREAK_WIDTHS[numOfVisibleItems - 1];\r\n\r\n    if (requiredSpace > availableSpace) {\r\n      // There is not enough room\r\n      OVERFLOW_LIST.insertBefore(VISIBLE_LIST.lastChild, OVERFLOW_LIST.lastChild);\r\n      numOfVisibleItems -= 1;\r\n\r\n      // Check again\r\n      f();\r\n    } else if (availableSpace > BREAK_WIDTHS[numOfVisibleItems]) {\r\n      // More than enough room\r\n      VISIBLE_LIST.appendChild(OVERFLOW_LIST.firstChild);\r\n      numOfVisibleItems += 1;\r\n\r\n      // Check again\r\n      f();\r\n    }\r\n\r\n    // Update the 'view more' button\r\n    VIEW_MORE_BUTTON.dataset.count = numOfItems - numOfVisibleItems;\r\n\r\n    if (numOfVisibleItems === numOfItems) {\r\n      VIEW_MORE_BUTTON.classList.add('s-hidden');\r\n    } else {\r\n      VIEW_MORE_BUTTON.classList.remove('s-hidden');\r\n    }\r\n  });\r\n\r\n  // Listen for resize event\r\n  w.addEventListener('resize', fitAndAdjust, false);\r\n\r\n  // Listen for click event\r\n  w.addEventListener('click', (ev) => {\r\n    if (ev.target.classList.contains('c-greedy-nav__button')) {\r\n      OVERFLOW_LIST.classList.toggle('s-hidden');\r\n    }\r\n  });\r\n\r\n  fitAndAdjust();\r\n}(typeof global !== 'undefined' ? global : window));\r\n"]}